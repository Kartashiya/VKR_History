TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER tr_op_goods_list_add\n	AFTER INSERT\n	ON op_goods_list\n	FOR EACH ROW\nBEGIN\n  DECLARE operation_type integer;\n\n  SELECT o.oIsSale FROM operations o\n  WHERE o.IDoperation = NEW.IDoperation INTO operation_type;\n\n  IF operation_type = 0 THEN\n    UPDATE storage s SET s.sCount = s.sCount + NEW.ocCount\n    WHERE s.IDgc = NEW.IDgc;\n  ELSE\n    UPDATE storage s SET s.sCount = s.sCount - NEW.ocCount\n    WHERE s.IDgc = NEW.IDgc;\n  END IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER tr_op_goods_edit\n	AFTER UPDATE\n	ON op_goods_list\n	FOR EACH ROW\nBEGIN\n  DECLARE operation_type integer;\n\n  SELECT o.oIsSale FROM operations o\n  WHERE o.IDoperation = NEW.IDoperation INTO operation_type;\n\n  IF operation_type = 0 THEN\n    UPDATE storage s SET s.sCount = s.sCount - OLD.ocCount WHERE s.IDgc = OLD.IDgc;\n    UPDATE storage s SET s.sCount = s.sCount + NEW.ocCount WHERE s.IDgc = NEW.IDgc;\n  ELSE\n    UPDATE storage s SET s.sCount = s.sCount + OLD.ocCount WHERE s.IDgc = OLD.IDgc;\n    UPDATE storage s SET s.sCount = s.sCount - NEW.ocCount WHERE s.IDgc = NEW.IDgc;\n  END IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER tr_op_goods_list_remove\n	AFTER DELETE\n	ON op_goods_list\n	FOR EACH ROW\nBEGIN\n  DECLARE operation_type integer;\n\n  SELECT o.oIsSale FROM operations o\n  WHERE o.IDoperation = OLD.IDoperation INTO operation_type;\n\n  IF operation_type = 0 THEN\n    UPDATE storage s SET s.sCount = s.sCount + OLD.ocCount\n    WHERE s.IDgc = OLD.IDgc;\n  ELSE\n    UPDATE storage s SET s.sCount = s.sCount - OLD.ocCount\n    WHERE s.IDgc = OLD.IDgc;\n  END IF;\nEND'
sql_modes=1436549152 1436549152 1436549152
definers='root@localhost' 'root@localhost' 'root@localhost'
client_cs_names='utf8' 'utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
db_cl_names='utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci'
created=168372523541 168372546210 168372533425
